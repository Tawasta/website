<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="slides_grid_view" inherit_id="website_slides.slides_grid_view">

        <xpath expr="//div[@class='row']" position="replace">
            <div class="col-xl-12 col-lg-12 col-md-12 col-12 mb16">
                <div class="col-xl-3 col-lg-4 col-md-6 col-12 mt16 mb16" t-foreach="slides" t-as="slide">
                    <div class="card card-body">
                        <a t-attf-href="/slides/slide/#{slug(slide)}">
                            <img t-attf-src="/web/image/slide.slide/#{slide.id}/image_thumb" class="img-fluid img-thumbnail oe_slides_grid_thumbnail" alt="slide.name"/>
                        </a>
                        <span t-if="not slide.website_published" class="badge badge-danger" style="position: absolute;right: 20px;top: 7px;">Unpublished</span>
                        <a t-if="not is_public_user and slide.website_published and slide.channel_id.promote_strategy == 'custom' and slide.channel_id.promoted_slide_id.id != slide.id"
                            groups="base.group_user"
                            t-attf-href="/slides/slide/#{slide.id}/promote"
                            style="position: absolute;right: 20px;top: 7px;"
                            t-attf-title="Promote this #{slide.slide_type}"
                            t-attf-aria-label="Promote this #{slide.slide_type}">
                            <span class="fa-stack fa-lg">
                              <i class="fa fa-square fa-stack-2x oe_slides_opacity"></i>
                              <i class="fa fa-bullhorn fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>

                        <div style="padding: 5px;">
                            <h4 class="mt4 mb8 oe_slides_ellipsis">
                                <a t-att-title="slide.name" t-attf-href="/slides/slide/#{slug(slide)}" t-esc="slide.name"/>
                            </h4>
                            <div class="text-muted clearfix">
                                <small class="float-left"><t t-esc="slide.total_views"/> Views</small>
                                <small class="float-right"><timeago class="timeago" t-att-datetime="slide.create_date"></timeago></small>
                            </div>
                            <p t-if="slide.tag_ids" style="padding-top: 5px;">
                                <t t-foreach="slide.tag_ids" t-as="att_tag">
                                    <a t-attf-href="/slides/#{slug(channel)}/tag/#{slug(att_tag)}" t-attf-class="badge badge-secondary #{tag and tag.name == att_tag.name and 'badge-primary' ''}" t-field="att_tag.name"/>
                                </t>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </xpath>
    </template>
</odoo>
