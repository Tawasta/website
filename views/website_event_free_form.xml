<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>

		<!-- Checkout form for free events-->
		<template id="event_free_form" name="Free event registration">
			<t t-call="website.layout">
                <div id="wrap">
                <form action="/shop/confirm_order" method="post" class="container">
                    <h3 class="page-header mt32">Your Details</h3>
                    <div class="row">
                        <div id="name_div" t-attf-class="form-group col-lg-6 #{error.get('name') and 'has-error' or ''}">
                            <label class="control-label" for="name">Your Name / Company name</label>
                            <input type="text" name="name" class="form-control" t-att-value="checkout.get('name')" required="required" />
                        </div>
                        <div div="email_div" t-attf-class="form-group col-lg-6 #{error.get('email') and 'has-error' or ''}">
                            <label class="control-label" for="email">Email</label>
                            <input type="email" name="email" class="form-control" t-att-value="checkout.get('email')" required="required" />
                        </div>
                    </div> 
                    <div class="row">
                        <div id="phone_div" t-attf-class="form-group col-lg-6 #{error.get('phone') and 'has-error' or ''}">
                            <label class="control-label" for="phone">Phone</label>
                            <input type="tel" name="phone" class="form-control" t-att-value="checkout.get('phone')" />
                        </div>
                    </div>

                    <!-- Form is validated using website_sale.checkout parse methods that require shipping_id -->
                    <div class="form-group col-lg-12 hidden">
                    	<label>Shipping</label>
                    	<select name="shipping_id" class="form-control">
                    		<option value="0">Ship to the same address</option>
                    	</select>
                    </div>
                    <button type="submit" class="btn btn-primary btn-lg pull-right">Register <span class="fa fa-long-arrow-right"/></button>
                </form>
                </div>
            </t>
		</template>

        <!-- Modify event_description_full to handle free events (max tickets available comes from event, not from ticket type)-->
        <template id="event_description_full" inherit_id="website_event_sale.event_description_full">
            <xpath expr="//t[@t-foreach='range(0, min((ticket.seats_available or 9) + 1, 10))']" position="replace">
                <t t-foreach="range(0, min((event.seats_available or 9) + 1, 10))" t-as="nb">
                    <option t-esc="nb"/>
                </t>
            </xpath>
        </template>
	</data>
</openerp>